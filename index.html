<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>éŠæˆ²å‚·å®³è¨ˆç®—å™¨</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      max-width: 600px;
      margin: auto;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      color: #b22222;
    }
  </style>
</head>
<body>
  <h1>éŠæˆ²å‚·å®³è¨ˆç®—å™¨</h1>

  <form id="damage-form">
    <label>åŸºç¤æŠ€èƒ½å‚·å®³ <input type="number" id="baseSkill" value="100" /></label>
    <label>æŠ€èƒ½å‚·å®³% <input type="number" id="skillPercent" value="150" /></label>
    <label>é¢æ¿å‚·å®³å€¼ <input type="number" id="panelDamage" value="200" /></label>
    <label>å‚·å®³% <input type="number" id="damagePercent" value="120" /></label>
    <label>æŠ€å‚·% <input type="number" id="techBonus" value="30" /></label>
    <label>å±¬å‚·% <input type="number" id="elementBonus" value="15" /></label>
    <label>å°å±¬å‚·% <input type="number" id="targetElementBonus" value="10" /></label>
    <label>ä¸»æ­¦å™¨å‚·% <input type="number" id="weaponBonus" value="20" /></label>
    <label>ç­‰å·® <input type="number" id="levelDiff" value="80" /></label>
    <label>å±¬æŠ—% <input type="number" id="elementResist" value="10" /></label>
    <label>é˜²ç¦¦æ¸›å‚·% <input type="number" id="defenseReduction" value="5" /></label>
    <label>çˆ†æ“Šå‚·å®³% <input type="number" id="critDamage" value="220" /></label>
    <label>å—åˆ°çˆ†æ“Šå‚·å®³é™ä½% <input type="number" id="critReduce" value="10" /></label>
    <label>é€ å‚·ï¼ˆä¾‹å¦‚ 1.1 ç‚º +10%ï¼‰<input type="number" step="0.01" id="finalDamageMult" value="1.1" /></label>
    <label>æ¸›å‚·ï¼ˆä¾‹å¦‚ 0.95 ç‚ºæ¸›å°‘ 5%ï¼‰<input type="number" step="0.01" id="damageReduceMult" value="0.95" /></label>

    <button type="button" onclick="calculateDamage()">è¨ˆç®—å‚·å®³</button>
  </form>

  <div id="result"></div>

  <script>
    function calculateDamage() {
      // å–å€¼
      const baseSkill = parseFloat(document.getElementById('baseSkill').value);
      const skillPercent = parseFloat(document.getElementById('skillPercent').value);
      const panelDamage = parseFloat(document.getElementById('panelDamage').value);
      const damagePercent = parseFloat(document.getElementById('damagePercent').value);
      const techBonus = parseFloat(document.getElementById('techBonus').value);
      const elementBonus = parseFloat(document.getElementById('elementBonus').value);
      const targetElementBonus = parseFloat(document.getElementById('targetElementBonus').value);
      const weaponBonus = parseFloat(document.getElementById('weaponBonus').value);
      const levelDiff = parseFloat(document.getElementById('levelDiff').value);
      const elementResist = parseFloat(document.getElementById('elementResist').value);
      const defenseReduction = parseFloat(document.getElementById('defenseReduction').value);
      const critDamage = parseFloat(document.getElementById('critDamage').value);
      const critReduce = parseFloat(document.getElementById('critReduce').value);
      const finalDamageMult = parseFloat(document.getElementById('finalDamageMult').value);
      const damageReduceMult = parseFloat(document.getElementById('damageReduceMult').value);

      // è¨ˆç®—ä¸»é«”å‚·å®³å€¼
      const rawDamage =
        baseSkill * (skillPercent / 100) +
        panelDamage * (damagePercent / 100) +
        techBonus +
        elementBonus +
        targetElementBonus +
        weaponBonus +
        (0.005 * levelDiff) -
        elementResist -
        defenseReduction;

      // çˆ†æ“Šä¿®æ­£
      const critMultiplier = (critDamage - critReduce) / 100;

      // ç¸½è¨ˆ
      const finalDamage = rawDamage * critMultiplier * finalDamageMult * damageReduceMult;

      // é¡¯ç¤ºçµæœ
      document.getElementById('result').innerText =
        'ğŸ‘‰ å¯¦éš›å‚·å®³ç‚ºï¼š' + finalDamage.toFixed(2);
    }
  </script>
</body>
</html>
