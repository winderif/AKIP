<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>遊戲傷害計算器</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="text-center mb-4">🧮 遊戲傷害計算器</h1>
  <div class="card shadow">
    <div class="card-body">
      <form id="damage-form" class="row g-3">

        <!-- 輸入欄位群組 -->
        <div class="col-md-6">
          <label class="form-label">基礎技能傷害</label>
          <input type="number" class="form-control" id="baseSkill" value="100">
        </div>
        <div class="col-md-6">
          <label class="form-label">技能傷害%</label>
          <input type="number" class="form-control" id="skillPercent" value="150">
        </div>

        <div class="col-md-6">
          <label class="form-label">面板傷害值</label>
          <input type="number" class="form-control" id="panelDamage" value="200">
        </div>
        <div class="col-md-6">
          <label class="form-label">傷害%</label>
          <input type="number" class="form-control" id="damagePercent" value="120">
        </div>

        <div class="col-md-6">
          <label class="form-label">技傷%</label>
          <input type="number" class="form-control" id="techBonus" value="30">
        </div>
        <div class="col-md-6">
          <label class="form-label">屬傷%</label>
          <input type="number" class="form-control" id="elementBonus" value="15">
        </div>

        <div class="col-md-6">
          <label class="form-label">對屬傷%</label>
          <input type="number" class="form-control" id="targetElementBonus" value="10">
        </div>
        <div class="col-md-6">
          <label class="form-label">主武器傷%</label>
          <input type="number" class="form-control" id="weaponBonus" value="20">
        </div>

        <div class="col-md-6">
          <label class="form-label">等差</label>
          <input type="number" class="form-control" id="levelDiff" value="80">
        </div>
        <div class="col-md-6">
          <label class="form-label">屬抗%</label>
          <input type="number" class="form-control" id="elementResist" value="10">
        </div>

        <div class="col-md-6">
          <label class="form-label">防禦減傷%</label>
          <input type="number" class="form-control" id="defenseReduction" value="5">
        </div>
        <div class="col-md-6">
          <label class="form-label">爆擊傷害%</label>
          <input type="number" class="form-control" id="critDamage" value="220">
        </div>

        <div class="col-md-6">
          <label class="form-label">受到爆擊傷害降低%</label>
          <input type="number" class="form-control" id="critReduce" value="10">
        </div>
        <div class="col-md-6">
          <label class="form-label">造傷（例如 1.1 為 +10%）</label>
          <input type="number" step="0.01" class="form-control" id="finalDamageMult" value="1.1">
        </div>

        <div class="col-md-6">
          <label class="form-label">減傷（例如 0.95 為減少 5%）</label>
          <input type="number" step="0.01" class="form-control" id="damageReduceMult" value="0.95">
        </div>

        <!-- 按鈕與結果 -->
        <div class="col-12 text-center">
          <button type="button" class="btn btn-primary px-5" onclick="calculateDamage()">計算傷害</button>
        </div>
        <div class="col-12 text-center mt-3">
          <div id="result" class="alert alert-info fw-bold" role="alert" style="display:none;"></div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- JavaScript -->
<script>
  function calculateDamage() {
    const baseSkill = parseFloat(document.getElementById('baseSkill').value);
    const skillPercent = parseFloat(document.getElementById('skillPercent').value);
    const panelDamage = parseFloat(document.getElementById('panelDamage').value);
    const damagePercent = parseFloat(document.getElementById('damagePercent').value);
    const techBonus = parseFloat(document.getElementById('techBonus').value);
    const elementBonus = parseFloat(document.getElementById('elementBonus').value);
    const targetElementBonus = parseFloat(document.getElementById('targetElementBonus').value);
    const weaponBonus = parseFloat(document.getElementById('weaponBonus').value);
    const levelDiff = parseFloat(document.getElementById('levelDiff').value);
    const elementResist = parseFloat(document.getElementById('elementResist').value);
    const defenseReduction = parseFloat(document.getElementById('defenseReduction').value);
    const critDamage = parseFloat(document.getElementById('critDamage').value);
    const critReduce = parseFloat(document.getElementById('critReduce').value);
    const finalDamageMult = parseFloat(document.getElementById('finalDamageMult').value);
    const damageReduceMult = parseFloat(document.getElementById('damageReduceMult').value);

    const rawDamage =
      baseSkill * (skillPercent / 100) +
      panelDamage * (damagePercent / 100) +
      techBonus +
      elementBonus +
      targetElementBonus +
      weaponBonus +
      (0.005 * levelDiff) -
      elementResist -
      defenseReduction;

    const critMultiplier = (critDamage - critReduce) / 100;
    const finalDamage = rawDamage * critMultiplier * finalDamageMult * damageReduceMult;

    const resultDiv = document.getElementById('result');
    resultDiv.innerText = '👉 實際傷害為：' + finalDamage.toFixed(2);
    resultDiv.style.display = 'block';
  }
</script>

</body>
</html>
